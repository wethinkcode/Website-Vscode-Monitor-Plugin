on: push
name: Slack Notification

jobs:
  slackNotification:
    name: Slack Notification
    runs-on: ${{ matrix.operating-system }}
    strategy:
      matrix:
        operating-system: [ubuntu-latest]

    steps:
      - uses: actions-ecosystem/action-get-latest-tag@v1
        id: get-latest-tag

      # - name: Slack Notification
      #   uses: rtCamp/action-slack-notify@v2
      #   env:
      #     SLACK_WEBHOOK: ${{ secrets.SLACK_WEBHOOK }}
      #     SLACK_MESSAGE: |
      #      'wtc-lms '${{ steps.release-label.new_version }}' is released'
      #     MSG_MINIMAL: true
      #     SLACK_USERNAME: NewDeployment
      #     SLACK_MSG_AUTHOR: Release Bot
      #     SLACK_FOOTER: Please update to the latest version
      #     SLACK_TITLE: There is a new release available
      #     SLACK_ICON: https://github.com/rtCamp.png?size=48


      - uses: actions/checkout@v2
        name: Checkout Repo
        
      - name: Slack Notification
        uses: archive/github-actions-slack@v1.0.3
        id: notify
        with:
          slack-bot-user-oauth-access-token: ${{ secrets.SLACK_OAUTH }}
          slack-channel: 02_fixes_and_lms_thingies
          slack-text: (IGNORE ME)A new version of the lms is available "${{ steps.get-latest-tag.outputs.tag }}"
      - name: Result from Slack Notification
        run: echo "The result was ${{ steps.notify.outputs.slack-result }}"